function setPlanType(t){var e=[],n="";_.each(t,(function(t){var a=t.planType;e.includes(a)||(e.push(a),n+="<option>"+a+"</option>")})),$("#planType").empty(),$("#planType").append(n)}function setPlanDate(){getPlan().then((function(t){plans=t.data;var e=$("#planType").val();plans=_.filter(plans,{planType:e});var n=[],a="";_.each(plans,(function(t){var e=t.date,p=t.dayOfWeek;n.includes(e)||(n.push(e),a+="<option>"+e+"("+p+")</option>")})),$("#planDate").empty(),$("#planDate").append(a)}))}function getOrders(){getOrder().then((function(t){orders=t.data;var e="";_.each(orders,(function(t){var n=t.accomodation?"有":"無",a=t.numberOfAdults,p=t.numberOfChildren;e+="<tr><td>"+t.id+"</td><td><select><option>"+t.planType+"</option></select></td><td><select><option>"+t.planDate+"</option></select></td><td>"+t.people[0].name+"</td><td>"+t.people[0].email+"</td><td>"+a+"</td><td>"+p+"</td><td>"+(a+p)+"</td><td>"+n+"</td><td><select><option>"+t.groupId+'</option></select></td><td><input type="button" value="查詢"></td><td>'+t.comment+"</td><td>成功</td><td>"+t.paymentMerchantTradeNo+"</td><td>"+t.registrationDate+"</td></tr> "})),$("#list").empty(),$("#list").append(e)}))}$(document).ready((function(){getPlan().then((function(t){plans=t.data,setPlanType(plans),setPlanDate()})),$("#planType").change((function(){setPlanDate()})),getOrders(),$("#search").keyup((function(){var t=$(this).val().toLowerCase();$("#list tr").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(t)>-1)}))}))}));